var curryN = require('ramda/src/curryN')

var promisify = require('./promisify')
var defaults  = { abortEarly: false }

var validateWith = function (joi, schema, x, opts) {
  if ( opts === void 0 ) opts=defaults;

  var _validateWith = promisify(joi.validate, joi)
  return _validateWith(x, schema, opts)
}

// validateWith :: Joi -> Schema -> a -> Promise a
module.exports = curryN(3, validateWith)
