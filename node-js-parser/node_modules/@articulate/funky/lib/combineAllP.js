var composeP = require('ramda/src/composeP')
var identity = require('ramda/src/identity')
var mergeAll = require('ramda/src/mergeAll')
var uncurryN = require('ramda/src/uncurryN')

var juxtP    = require('./juxtP')

// combineAllP :: [({ k: v }, ...) -> Promise { k: v }] -> ({ k: v }, ...) -> Promise { k: v }
var combineAllP = function (fns) { return composeP(mergeAll, juxtP([ identity ].concat( fns ))); }

module.exports = uncurryN(2, combineAllP)
