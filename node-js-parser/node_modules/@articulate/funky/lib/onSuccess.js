var curry     = require('ramda/src/curry')
var lensIndex = require('ramda/src/lensIndex')
var nth       = require('ramda/src/nth')
var over      = require('ramda/src/over')
var pair      = require('ramda/src/pair')
var pipe      = require('ramda/src/pipe')

var combineWith = require('./combineWith')

// onSuccess :: (a -> b) -> (a -> c) -> b
var onSuccess = function (afterThis, that, data) { return pipe(
  combineWith(pair, afterThis),
  over(lensIndex(0), that),
  nth(1)
)(data); }

module.exports = curry(onSuccess)
