var apply    = require('ramda/src/apply')
var composeP = require('ramda/src/composeP')
var unapply  = require('ramda/src/unapply')
var uncurryN = require('ramda/src/uncurryN')
var useWith  = require('ramda/src/useWith')

var all      = require('./all')

// useWithP :: (a -> b -> Promise c) -> [(d -> Promise a), (e -> Promise b)] -> (d -> e -> Promise c)
var useWithP = function (fn) { return useWith(unapply(composeP(apply(fn), all))); }

module.exports = uncurryN(2, useWithP)
