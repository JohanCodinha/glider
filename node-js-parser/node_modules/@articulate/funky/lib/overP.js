var __    = require('ramda/src/__')
var curry = require('ramda/src/curry')
var set   = require('ramda/src/set')
var view  = require('ramda/src/view')

// overP :: Lens s => (a -> Promise b) -> s a -> Promise s b
var overP = function (s, fn, data) { return Promise.resolve(view(s, data)).then(fn).then(set(s, __, data)); }

module.exports = curry(overP)
