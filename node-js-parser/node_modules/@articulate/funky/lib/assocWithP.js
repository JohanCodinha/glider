var assoc     = require('ramda/src/assoc')
var identity  = require('ramda/src/identity')
var uncurryN  = require('ramda/src/uncurryN')

var convergeP = require('./convergeP')

// assocWithP :: String -> ({ k: v } -> Promise a) -> Promise { k: v } -> Promise { k: v }
var assocWithP = function (key, fn) { return convergeP(assoc(key), [fn, identity]); }

module.exports = uncurryN(3, assocWithP)
