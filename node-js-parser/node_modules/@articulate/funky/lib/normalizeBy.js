var assoc    = require('ramda/src/assoc')
var reduce   = require('ramda/src/reduce')
var uncurryN = require('ramda/src/uncurryN')

// normalizeBy :: String -> [{ k: v }] -> { v: { k: v } }
var normalizeBy = function (id) { return reduce(putBy(id), {}); }

// putBy :: String -> ({ v: { k: v } }, { k: v }) -> { v: { k: v } }
var putBy = function (id) { return function (list, item) { return assoc(item[id], item, list); }; }

module.exports = uncurryN(2, normalizeBy)
